<script>
  var loadNextPage = function(){
    if ($('#packages_table').length == 0){ return }
    if ($('#next_link').length == 0){ return }

    if ($('#next_link').data("loading")){ return }

    var wBottom  = $(window).scrollTop() + $(window).height();
    var elBottom = $('#packages_table').offset().top + $('#packages_table').height();

    var scrollOffset = elBottom - wBottom;
    var scrollHeight = 1.5 * $(window).height();

    if (scrollHeight > scrollOffset){
      $('#next_link')[0].click();
      $('#next_link').data("loading", true);
    }
  };

  window.addEventListener('resize', loadNextPage);
  window.addEventListener('load',   loadNextPage);
</script>
